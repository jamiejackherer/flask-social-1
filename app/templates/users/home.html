{% extends "base.html" %}
{% block page_title %}{{ APP_NAME }}{% endblock %}

{% block content %}
<div class="grid-container">
  <div class="profile-aside">
    <div class="profile-info-container">
      <a class="profile-info" href="{{ url_for('users.profile', username=current_user.username) }}">
        <img src="{{ current_user.avatar(60) }}">
        <h2>{{ current_user.first_name }}<br>{{ current_user.last_name }}</h1>
      </a>
      <div class="user-numbers user-numbers-home">
        <a href="{{ url_for('users.profile', username=current_user.username) }}">
          Posts <span>{{ current_user.post_count() }}</span>
        </a>
        <a href="{{ url_for('users.followers', username=current_user.username) }}">
          Followers <span>{{ current_user.get_followers.count() }}</span>
        </a>
        <a href="{{ url_for('users.following', username=current_user.username) }}">
          Following <span>{{ current_user.get_followed.count() }}</span>
        </a>
      </div><!--//END .user-numbers .user-numbers-home-->
    </div><!--//END .profile-info-container-->
    {% if unfollowed_posts %}
    <div class="recent-posts-container">
      <h3>Recent posts you may be interested in</h3>
      <ul class="recent-posts">
        {% for post in unfollowed_posts %}
        <li>
          <a class="post-header" href="{{ url_for('users.profile', username=post.author.username) }}">
            <img src="{{ post.author.avatar(30) }}">
            <p>{{ post.author.full_name }}</p>
          </a>
          <p>{{ post.body|truncate }}</p>
        </li>
        {% endfor %}
      </ul><!--//END .recent-posts-->
    </div><!--//END .recent-posts-container-->
    {% endif %}
  </div><!--//END .profile-aside-->

  <div class="profile-content">
    <form method="post" novalidate>
      {{ form.body(placeholder="What's on your mind?") }}
      {{ form.submit }}
      {{ form.csrf_token }}
    </form>
    {% if posts.pages > 1 %}
      {% from "/_macros.html" import render_pagination %}
      {{ render_pagination(posts, 'users.home') }}
    {% endif %}
    
    {% if posts.items %}
      {% for post in posts.items %}
      {% include "/users/_post.html" %}
      {% endfor %}
    {% else %}
    <p class="card">Nothing to show. Post something, or start following some people.</p>
    {% endif %}
  
    {% if posts.pages > 1 %}
      {% from "/_macros.html" import render_pagination %}
      {{ render_pagination(posts, 'users.home') }}
    {% endif %}
  </div><!--//END .profile-content-->
</div><!--//END .grid-container-->
{% endblock %}

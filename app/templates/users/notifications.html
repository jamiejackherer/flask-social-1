{% extends "/base.html" %}

{% from "/_macros.html" import render_pagination %}

{% block content %}
<div class="notification-container">
  <h2 class="page-sub-title">Notifications</h3>
  
  {% if notifications.pages > 1 %}
    {{ render_pagination(notifications, 'users.notifications') }}
  {% endif %}

  {% if notifications.items %}
  <ul class="notification-list">
  {% for n in notifications.items %}
    <li>

    {% if n.name == 'follow' %}
      <a href="{{ url_for('users.profile', username=n.notifier.username) }}">{{ n.notifier.full_name }}</a>
      started
      <a href="{{ url_for('users.followers', username=current_user.username) }}">following</a>
      you

    {% elif n.name == 'comment' %}
      <a href="{{ url_for('users.profile', username=n.notifier.username) }}">{{ n.notifier.full_name }}</a>
      <a href="{{ url_for('users.comment', comment_id=n.comment.id, notification='comment') }}">commented</a>
      on your
      <a href="{{ url_for('users.post', post_id=n.comment.post.id, notification='comment') }}">post</a>

    {% elif n.name == 'comment_like_post' %}
      <a href="{{ url_for('users.profile', username=n.notifier.username) }}">{{ n.notifier.full_name }}</a>
      liked a
      <a href="{{ url_for('users.comment', comment_id=n.comment.id, notification='comment_like_post') }}">comment</a>
      of your 
      <a href="{{ url_for('users.post', post_id=n.comment.post.id) }}">post</a>

    {% elif n.name == 'comment_wall' %}
      <a href="{{ url_for('users.profile', username=n.notifier.username) }}">{{ n.notifier.full_name }}</a>
      commented on a
      <a href="{{ url_for('users.post', post_id=n.comment.post.id, notification='comment_wall') }}">post</a> 
      on your wall

    {% elif n.name == 'comment_like_wall' %}
      <a href="{{ url_for('users.profile', username=n.notifier.username) }}">{{ n.notifier.full_name }}</a> 
      liked a
      <a href="{{ url_for('users.comment', comment_id=n.comment.id, notification='comment_like_wall') }}">comment</a>
      from a
      <a href="{{ url_for('users.post', post_id=n.comment.post.id) }}">post</a>
      on your wall

    {% elif n.name == 'comment_like' %}
      <a href="{{ url_for('users.profile', username=n.notifier.username) }}">{{ n.notifier.full_name }}</a>
      liked your
      <a href="{{ url_for('users.comment', comment_id=n.comment.id, notification='comment_like') }}">comment</a>

    {% elif n.name == 'post_like_wall' %}
      <a href="{{ url_for('users.profile', username=n.notifier.username) }}">{{ n.notifier.full_name }}</a>
      liked a
      <a href="{{ url_for('users.post', post_id=n.post.id, notification='post_like_wall') }}">post</a>
      on your wall

    {% elif n.name == 'post_like' %}
      <a href="{{ url_for('users.profile', username=n.notifier.username) }}">{{ n.notifier.full_name }}</a>
      liked your
      <a href="{{ url_for('users.post', post_id=n.post.id, notification='post_like') }}">post</a>

    {% elif n.name == 'post' %}
      <a href="{{ url_for('users.profile', username=n.notifier.username) }}">{{ n.notifier.full_name }}</a>
      <a href="{{ url_for('users.post', post_id=n.post.id, notification='post') }}">posted</a>
      on your wall
    {% endif %}
    </li>
  {% endfor %}
  </ul>
  {% else %}
  <p class="card">You do not have any notifications to show.</p>
  {% endif %}

  {% if notifications.pages > 1 %}
    {{ render_pagination(notifications, 'users.notifications') }}
  {% endif %}

  {#
  <br><br><br><br>

  <table>
    <tr>
      <th>Name</th>
      <th>Read</th>
      <th>Created</th>
      <th>Post ID</th>
      <th>Comment ID</th>
      <th>Notified ID</th>
      <th>Notifier ID</th>
    </tr>
    {% for n in current_user.notifications %}
    <tr>
      <td>{{ n.name }}</td>
      <td>{{ n.read }}</td>
      <td>{{ n.created }}</td>
      <td>{{ n.post_id }}</td>
      <td>{{ n.comment_id }}</td>
      <td>{{ n.notified_id }}</td>
      <td>{{ n.notifier_id }}</td>
    </tr>
    {% endfor %}
  </table>
  #}
</div><!--//END .notification-container-->
{% endblock %}
